<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FocusArena - 專注力競技場</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --warning-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            --dark-bg: #1a1a2e;
            --card-bg: rgba(255, 255, 255, 0.98);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.15);
            --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.12);
            --shadow-md: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* 動態背景效果 */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.03" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,138.7C960,139,1056,117,1152,112C1248,107,1344,117,1392,122.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') no-repeat bottom;
            pointer-events: none;
            z-index: 1;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        /* 品牌標題 */
        .brand-header {
            text-align: center;
            margin-bottom: 30px;
            animation: fadeInDown 0.8s ease;
        }

        .brand-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 48px;
            font-weight: 900;
            color: white;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            letter-spacing: 3px;
            margin-bottom: 10px;
            display: inline-flex;
            align-items: center;
            gap: 15px;
        }

        .brand-icon {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .brand-subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 16px;
            font-weight: 500;
            letter-spacing: 2px;
        }

        /* 主要統計卡片 */
        .stats-header {
            background: var(--card-bg);
            border-radius: 25px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow-xl);
            backdrop-filter: blur(10px);
            animation: fadeIn 0.8s ease 0.2s both;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .rank-section {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .rank-badge {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 24px;
            background: var(--primary-gradient);
            color: white;
            border-radius: 15px;
            font-size: 18px;
            font-weight: 700;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }

        .rank-badge::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .rank-icon {
            font-size: 28px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
        }

        .data-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 10px 18px;
            border: none;
            background: white;
            color: #667eea;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }

        .action-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: var(--primary-gradient);
            transition: width 0.5s, height 0.5s;
            transform: translate(-50%, -50%);
        }

        .action-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .action-btn:hover {
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .action-btn span {
            position: relative;
            z-index: 1;
        }

        /* 統計項目網格 - 加入圓環 */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px 15px;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            cursor: default;
            position: relative;
        }

        .stat-card:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .stat-card:nth-child(1) { background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); }
        .stat-card:nth-child(2) { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); }
        .stat-card:nth-child(3) { background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%); }
        .stat-card:nth-child(4) { background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%); }

        /* 小型圓環進度 */
        .mini-ring {
            width: 60px;
            height: 60px;
            position: relative;
        }

        .mini-ring svg {
            transform: rotate(-90deg);
        }

        .mini-ring-bg {
            stroke: rgba(255, 255, 255, 0.3);
            fill: none;
            stroke-width: 6;
        }

        .mini-ring-progress {
            stroke: white;
            fill: none;
            stroke-width: 6;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.5s ease;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
        }

        .mini-ring-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .stat-info {
            text-align: center;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.8;
            font-weight: 500;
            color: #2c3e50;
        }

        .stat-value {
            font-size: 18px;
            font-weight: 700;
            color: #2c3e50;
        }

        /* 經驗值進度條 */
        .xp-progress {
            background: #e0e7ff;
            border-radius: 20px;
            height: 35px;
            overflow: hidden;
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.1);
            position: relative;
        }

        .xp-bar {
            height: 100%;
            background: var(--primary-gradient);
            border-radius: 20px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 14px;
            position: relative;
            overflow: hidden;
        }

        .xp-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255,255,255,0.3), 
                transparent);
            animation: progressShine 2s linear infinite;
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* 主要內容網格 */
        .main-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        /* 卡片樣式 */
        .card {
            background: var(--card-bg);
            border-radius: 25px;
            padding: 30px;
            box-shadow: var(--shadow-xl);
            backdrop-filter: blur(10px);
            animation: fadeInUp 0.8s ease both;
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card:nth-child(1) { animation-delay: 0.3s; }
        .card:nth-child(2) { animation-delay: 0.4s; }
        .card:nth-child(3) { animation-delay: 0.5s; }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 25px;
        }

        .card-icon {
            width: 45px;
            height: 45px;
            background: var(--primary-gradient);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: var(--shadow-md);
        }

        .card-title {
            font-size: 22px;
            font-weight: 700;
            color: #2c3e50;
            flex: 1;
        }

        /* 番茄鐘圓環樣式 */
        .timer-container {
            text-align: center;
            padding: 20px;
        }

        .timer-ring-container {
            position: relative;
            width: 250px;
            height: 250px;
            margin: 0 auto 30px;
        }

        .timer-ring {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .timer-ring-bg {
            stroke: #e0e7ff;
            fill: none;
            stroke-width: 12;
        }

        .timer-ring-progress {
            stroke: url(#gradient);
            fill: none;
            stroke-width: 12;
            stroke-linecap: round;
            transition: stroke-dashoffset 1s linear;
            filter: drop-shadow(0 4px 8px rgba(102, 126, 234, 0.3));
        }

        .timer-ring-glow {
            stroke: url(#gradient);
            fill: none;
            stroke-width: 12;
            stroke-linecap: round;
            opacity: 0.3;
            filter: blur(8px);
        }

        .timer-display {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Orbitron', monospace;
            font-size: 48px;
            font-weight: 700;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .timer-label {
            position: absolute;
            top: 65%;
            left: 50%;
            transform: translate(-50%, 0);
            color: #7f8c8d;
            font-size: 14px;
            font-weight: 500;
        }

        /* 浮動圓環背景裝飾 */
        .floating-rings {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .floating-ring {
            position: absolute;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 20s infinite ease-in-out;
        }

        .floating-ring:nth-child(1) {
            width: 300px;
            height: 300px;
            top: 10%;
            left: -150px;
            animation-delay: 0s;
        }

        .floating-ring:nth-child(2) {
            width: 200px;
            height: 200px;
            top: 60%;
            right: -100px;
            animation-delay: 5s;
        }

        .floating-ring:nth-child(3) {
            width: 150px;
            height: 150px;
            bottom: 10%;
            left: 10%;
            animation-delay: 10s;
        }

        @keyframes float {
            0%, 100% {
                transform: translate(0, 0) rotate(0deg);
            }
            33% {
                transform: translate(30px, -30px) rotate(120deg);
            }
            66% {
                transform: translate(-20px, 20px) rotate(240deg);
            }
        }

        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
        }

        /* 按鈕樣式 */
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            transition: width 0.5s, height 0.5s;
            transform: translate(-50%, -50%);
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            opacity: 0.8;
        }

        .btn-success {
            background: var(--success-gradient);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
        }

        /* 任務完成度圓環 */
        .todo-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
        }

        .todo-stat-ring {
            text-align: center;
        }

        .todo-ring {
            width: 80px;
            height: 80px;
            position: relative;
            margin: 0 auto 10px;
        }

        .todo-ring svg {
            transform: rotate(-90deg);
        }

        .todo-ring-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
        }

        .todo-stat-label {
            font-size: 12px;
            color: #7f8c8d;
            font-weight: 500;
        }

        /* 待辦事項樣式 */
        .todo-input-group {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        .todo-input {
            flex: 1;
            padding: 14px 18px;
            border: 2px solid #e0e7ff;
            border-radius: 12px;
            font-size: 15px;
            transition: all 0.3s;
            background: #f8f9ff;
        }

        .todo-input:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }

        .todo-list {
            max-height: 300px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .todo-list::-webkit-scrollbar {
            width: 8px;
        }

        .todo-list::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .todo-list::-webkit-scrollbar-thumb {
            background: var(--primary-gradient);
            border-radius: 10px;
        }

        .todo-item {
            display: flex;
            align-items: center;
            padding: 16px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 12px;
            margin-bottom: 12px;
            transition: all 0.3s;
            box-shadow: var(--shadow-md);
        }

        .todo-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-lg);
        }

        .todo-item.completed {
            opacity: 0.5;
            background: linear-gradient(135deg, #e0e0e0 0%, #b0b0b0 100%);
        }

        .todo-checkbox {
            width: 22px;
            height: 22px;
            margin-right: 15px;
            cursor: pointer;
            accent-color: #667eea;
        }

        .todo-text {
            flex: 1;
            font-size: 15px;
            font-weight: 500;
            color: #2c3e50;
        }

        .todo-item.completed .todo-text {
            text-decoration: line-through;
            color: #7f8c8d;
        }

        .todo-delete {
            padding: 6px 12px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .todo-delete:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-md);
        }

        /* 商店樣式 */
        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .shop-item {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            transition: all 0.3s;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }

        .shop-item::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.5), transparent);
            transform: rotate(45deg);
            transition: all 0.5s;
            opacity: 0;
        }

        .shop-item:hover::before {
            animation: shopShine 0.5s ease;
        }

        @keyframes shopShine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .shop-item:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: var(--shadow-xl);
        }

        .shop-icon {
            font-size: 48px;
            margin-bottom: 12px;
            filter: drop-shadow(0 3px 6px rgba(0,0,0,0.1));
        }

        .shop-name {
            font-size: 16px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .shop-cost {
            font-size: 18px;
            font-weight: 700;
            color: #f39c12;
            margin-bottom: 15px;
            text-shadow: 0 2px 4px rgba(243, 156, 18, 0.2);
        }

        /* 休息計時器 */
        .break-timer {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
            padding: 20px 25px;
            border-radius: 20px;
            box-shadow: var(--shadow-xl);
            display: none;
            z-index: 1000;
            animation: slideInRight 0.5s ease;
        }

        .break-timer.active {
            display: block;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .break-timer h3 {
            font-size: 18px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        #breakDisplay {
            font-family: 'Orbitron', monospace;
            font-size: 32px;
            font-weight: 700;
            margin: 10px 0;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        /* 通知樣式 */
        .notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 35px;
            border-radius: 25px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
            display: none;
            z-index: 2000;
            min-width: 350px;
        }

        .notification.show {
            display: block;
            animation: bounceIn 0.5s ease;
        }

        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.3);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.05);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .notification h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 28px;
            font-weight: 700;
        }

        .notification p {
            font-size: 16px;
            margin-bottom: 25px;
            color: #5a6c7d;
        }

        /* 動畫 */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 確認對話框 */
        .confirm-dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 2001;
            min-width: 350px;
        }

        .confirm-dialog.show {
            display: block;
            animation: bounceIn 0.5s ease;
        }

        .confirm-dialog h4 {
            margin-bottom: 15px;
            color: #2c3e50;
            font-size: 20px;
            font-weight: 700;
        }

        .confirm-dialog p {
            color: #7f8c8d;
            font-size: 14px;
            margin-bottom: 25px;
        }

        .confirm-dialog-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .confirm-btn {
            padding: 10px 24px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .confirm-btn-yes {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
        }

        .confirm-btn-no {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .confirm-btn:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        /* 隱藏文件輸入 */
        #fileInput {
            display: none;
        }

        /* 載入動畫 */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary-gradient);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeOut 1s ease 0.5s forwards;
        }

        .loader-ring {
            width: 120px;
            height: 120px;
            position: relative;
        }

        .loader-ring svg {
            animation: rotate 2s linear infinite;
        }

        @keyframes rotate {
            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                visibility: hidden;
            }
        }

        /* 響應式設計 */
        @media (max-width: 768px) {
            .brand-title {
                font-size: 32px;
            }
            
            .brand-icon {
                width: 45px;
                height: 45px;
                font-size: 24px;
            }
            
            .timer-ring-container {
                width: 200px;
                height: 200px;
            }
            
            .timer-display {
                font-size: 36px;
            }
            
            .header-top {
                flex-direction: column;
                align-items: stretch;
            }
            
            .data-actions {
                justify-content: center;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- 浮動圓環背景 -->
    <div class="floating-rings">
        <div class="floating-ring"></div>
        <div class="floating-ring"></div>
        <div class="floating-ring"></div>
    </div>

    <!-- 載入動畫 -->
    <div class="loader" id="loader">
        <div style="text-align: center;">
            <div style="font-family: 'Orbitron', sans-serif; font-size: 36px; color: white; font-weight: 900; margin-top: 20px;">
                FocusArena
            </div>
            <div style="color: rgba(255,255,255,0.8); margin-top: 10px;">載入中...</div>
        </div>
    </div>

    <div class="container">
        <!-- 品牌標題 -->
        <div class="brand-header">
            <div class="brand-title">
                <div class="brand-icon">⚔️</div>
                FocusArena
            </div>
            <div class="brand-subtitle">專注力競技場 - 挑戰自我，成就卓越</div>
        </div>

        <!-- 統計資訊卡片 -->
        <div class="stats-header">
            <div class="header-top">
                <div class="rank-section">
                    <div class="rank-badge">
                        <span class="rank-icon" id="rankIcon">🥉</span>
                        <span id="rankName">青銅 III</span>
                    </div>
                </div>
                <div class="data-actions">
                    <button class="action-btn" onclick="exportData()">
                        <span>💾</span>
                        <span>匯出</span>
                    </button>
                    <button class="action-btn" onclick="document.getElementById('fileInput').click()">
                        <span>📂</span>
                        <span>匯入</span>
                    </button>
                    <button class="action-btn" onclick="showResetConfirm()">
                        <span>🔄</span>
                        <span>重置</span>
                    </button>
                </div>
            </div>
            
            <input type="file" id="fileInput" accept=".json" onchange="importData(event)">
            
            <!-- 圓環統計 -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="mini-ring">
                        <svg width="60" height="60">
                            <circle cx="30" cy="30" r="25" class="mini-ring-bg"/>
                            <circle cx="30" cy="30" r="25" class="mini-ring-progress" 
                                    id="coinRing"
                                    stroke-dasharray="157"
                                    stroke-dashoffset="157"/>
                        </svg>
                        <div class="mini-ring-center">💰</div>
                    </div>
                    <div class="stat-info">
                        <div class="stat-label">金幣</div>
                        <div class="stat-value" id="coins">0</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="mini-ring">
                        <svg width="60" height="60">
                            <circle cx="30" cy="30" r="25" class="mini-ring-bg"/>
                            <circle cx="30" cy="30" r="25" class="mini-ring-progress"
                                    id="xpRing" 
                                    stroke-dasharray="157"
                                    stroke-dashoffset="157"/>
                        </svg>
                        <div class="mini-ring-center">⭐</div>
                    </div>
                    <div class="stat-info">
                        <div class="stat-label">經驗值</div>
                        <div class="stat-value" id="xp">0</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="mini-ring">
                        <svg width="60" height="60">
                            <circle cx="30" cy="30" r="25" class="mini-ring-bg"/>
                            <circle cx="30" cy="30" r="25" class="mini-ring-progress"
                                    id="levelRing"
                                    stroke-dasharray="157"
                                    stroke-dashoffset="157"/>
                        </svg>
                        <div class="mini-ring-center">🎯</div>
                    </div>
                    <div class="stat-info">
                        <div class="stat-label">等級</div>
                        <div class="stat-value" id="level">Lv.1</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="mini-ring">
                        <svg width="60" height="60">
                            <circle cx="30" cy="30" r="25" class="mini-ring-bg"/>
                            <circle cx="30" cy="30" r="25" class="mini-ring-progress"
                                    id="streakRing"
                                    stroke-dasharray="157"
                                    stroke-dashoffset="157"/>
                        </svg>
                        <div class="mini-ring-center">🔥</div>
                    </div>
                    <div class="stat-info">
                        <div class="stat-label">連續天數</div>
                        <div class="stat-value" id="streak">0</div>
                    </div>
                </div>
            </div>
            
            <div class="xp-progress">
                <div class="xp-bar" id="levelProgress">
                    <span id="levelProgressText">0%</span>
                </div>
            </div>
        </div>

        <!-- 主要功能區 -->
        <div class="main-grid">
            <!-- 番茄鐘卡片 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">🍅</div>
                    <h2 class="card-title">番茄鐘計時器</h2>
                </div>
                <div class="timer-container">
                    <div class="timer-ring-container">
                        <svg class="timer-ring" viewBox="0 0 250 250">
                            <defs>
                                <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <circle cx="125" cy="125" r="110" class="timer-ring-bg"/>
                            <circle cx="125" cy="125" r="110" class="timer-ring-glow"
                                    id="timerGlow"
                                    stroke-dasharray="691"
                                    stroke-dashoffset="0"/>
                            <circle cx="125" cy="125" r="110" class="timer-ring-progress"
                                    id="timerProgress"
                                    stroke-dasharray="691"
                                    stroke-dashoffset="0"/>
                        </svg>
                        <div class="timer-display" id="timerDisplay">25:00</div>
                        <div class="timer-label">專注時間</div>
                    </div>
                    <div class="timer-controls">
                        <button class="btn btn-primary" id="startBtn" onclick="startTimer()">開始</button>
                        <button class="btn btn-secondary" id="pauseBtn" onclick="pauseTimer()" style="display:none;">暫停</button>
                        <button class="btn btn-danger" onclick="resetTimer()">重置</button>
                    </div>
                    <div style="margin-top: 20px;">
                        <p style="color: #7f8c8d; font-size: 14px;">
                            完成獎勵：<strong style="color: #f39c12;">10 金幣 + 25 XP</strong>
                        </p>
                        <p style="color: #7f8c8d; margin-top: 8px; font-size: 14px;">
                            已完成 <strong id="pomodoroCount" style="color: #667eea; font-size: 18px;">0</strong> 個番茄鐘
                        </p>
                    </div>
                </div>
            </div>

            <!-- 待辦事項卡片 -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">📋</div>
                    <h2 class="card-title">任務清單</h2>
                </div>
                
                <!-- 任務統計圓環 -->
                <div class="todo-stats">
                    <div class="todo-stat-ring">
                        <div class="todo-ring">
                            <svg width="80" height="80">
                                <circle cx="40" cy="40" r="35" stroke="#e0e7ff" stroke-width="8" fill="none"/>
                                <circle cx="40" cy="40" r="35" stroke="#667eea" stroke-width="8" fill="none"
                                        id="todoCompleteRing"
                                        stroke-dasharray="220"
                                        stroke-dashoffset="220"
                                        stroke-linecap="round"/>
                            </svg>
                            <div class="todo-ring-center" id="todoCompletePercent">0%</div>
                        </div>
                        <div class="todo-stat-label">完成率</div>
                    </div>
                    <div class="todo-stat-ring">
                        <div class="todo-ring">
                            <svg width="80" height="80">
                                <circle cx="40" cy="40" r="35" stroke="#e0e7ff" stroke-width="8" fill="none"/>
                                <circle cx="40" cy="40" r="35" stroke="#f39c12" stroke-width="8" fill="none"
                                        id="todoDailyRing"
                                        stroke-dasharray="220"
                                        stroke-dashoffset="220"
                                        stroke-linecap="round"/>
                            </svg>
                            <div class="todo-ring-center" id="todoDailyCount">0</div>
                        </div>
                        <div class="todo-stat-label">今日任務</div>
                    </div>
                </div>
                
                <div class="todo-input-group">
                    <input type="text" class="todo-input" id="todoInput" placeholder="新增任務..." onkeypress="if(event.key==='Enter') addTodo()">
                    <button class="btn btn-primary" onclick="addTodo()">新增</button>
                </div>
                <div class="todo-list" id="todoList"></div>
                <div style="text-align: center; margin-top: 20px;">
                    <p style="color: #7f8c8d; font-size: 14px;">
                        完成獎勵：<strong style="color: #f39c12;">5 金幣 + 10 XP</strong>
                    </p>
                </div>
            </div>
        </div>

        <!-- 獎勵商店卡片 -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon">🏪</div>
                <h2 class="card-title">獎勵商店</h2>
            </div>
            <div class="shop-grid">
                <div class="shop-item">
                    <div class="shop-icon">☕</div>
                    <div class="shop-name">短暫休息</div>
                    <div class="shop-cost">💰 15</div>
                    <button class="btn btn-success" onclick="redeemBreak(5, 15)">5分鐘</button>
                </div>
                <div class="shop-item">
                    <div class="shop-icon">🎮</div>
                    <div class="shop-name">遊戲時間</div>
                    <div class="shop-cost">💰 25</div>
                    <button class="btn btn-success" onclick="redeemBreak(10, 25)">10分鐘</button>
                </div>
                <div class="shop-item">
                    <div class="shop-icon">🍿</div>
                    <div class="shop-name">影片時間</div>
                    <div class="shop-cost">💰 35</div>
                    <button class="btn btn-success" onclick="redeemBreak(15, 35)">15分鐘</button>
                </div>
                <div class="shop-item">
                    <div class="shop-icon">🛋️</div>
                    <div class="shop-name">完整休息</div>
                    <div class="shop-cost">💰 60</div>
                    <button class="btn btn-success" onclick="redeemBreak(30, 60)">30分鐘</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 休息計時器 -->
    <div class="break-timer" id="breakTimer">
        <h3>🎮 休息時間</h3>
        <div id="breakDisplay">00:00</div>
        <button class="btn btn-danger" style="margin-top: 15px; width: 100%;" onclick="stopBreak()">結束</button>
    </div>

    <!-- 通知彈窗 -->
    <div class="notification" id="notification">
        <h3 id="notificationTitle">恭喜！</h3>
        <p id="notificationMessage">您完成了一個番茄鐘！</p>
        <button class="btn btn-primary" onclick="closeNotification()">確定</button>
    </div>

    <!-- 確認對話框 -->
    <div class="confirm-dialog" id="confirmDialog">
        <h4>⚠️ 確定要重置嗎？</h4>
        <p>所有數據將會被清除，這個操作無法復原。</p>
        <div class="confirm-dialog-buttons">
            <button class="confirm-btn confirm-btn-no" onclick="hideResetConfirm()">取消</button>
            <button class="confirm-btn confirm-btn-yes" onclick="resetAllData()">確定</button>
        </div>
    </div>

    <script>
        // 隱藏載入畫面
        setTimeout(() => {
            document.getElementById('loader').style.display = 'none';
        }, 1500);

        // 遊戲數據
        let gameData = {
            coins: 0,
            xp: 0,
            level: 1,
            streak: 0,
            pomodoroCount: 0,
            todos: [],
            lastActiveDate: new Date().toDateString(),
            totalFocusTime: 0,
            completedTasks: 0
        };

        // 段位系統
        const ranks = [
            { name: "青銅 III", icon: "🥉", minXP: 0 },
            { name: "青銅 II", icon: "🥉", minXP: 100 },
            { name: "青銅 I", icon: "🥉", minXP: 200 },
            { name: "白銀 III", icon: "🥈", minXP: 400 },
            { name: "白銀 II", icon: "🥈", minXP: 600 },
            { name: "白銀 I", icon: "🥈", minXP: 900 },
            { name: "黃金 III", icon: "🥇", minXP: 1300 },
            { name: "黃金 II", icon: "🥇", minXP: 1700 },
            { name: "黃金 I", icon: "🥇", minXP: 2200 },
            { name: "白金 III", icon: "💠", minXP: 2800 },
            { name: "白金 II", icon: "💠", minXP: 3500 },
            { name: "白金 I", icon: "💠", minXP: 4300 },
            { name: "鑽石 III", icon: "💎", minXP: 5200 },
            { name: "鑽石 II", icon: "💎", minXP: 6200 },
            { name: "鑽石 I", icon: "💎", minXP: 7300 },
            { name: "大師", icon: "👑", minXP: 8500 },
            { name: "宗師", icon: "🏆", minXP: 10000 },
            { name: "傳說", icon: "🌟", minXP: 12000 },
            { name: "傳說一星", icon: "🌟", minXP: 12200 },
            { name: "傳說二星", icon: "🌟", minXP: 12400 },
            { name: "傳說三星", icon: "🌟", minXP: 12600 },
            { name: "傳說四星", icon: "🌟", minXP: 12800 }
        ];

        // 計時器變數
        let timerInterval = null;
        let breakInterval = null;
        let timeLeft = 25 * 60;
        let totalTime = 25 * 60;
        let isRunning = false;

        // 初始化
        function init() {
            loadData();
            updateUI();
            updateTodoList();
            updateTodoStats();
            checkStreak();
            updateTimerRing();
        }

        // 載入數據
        function loadData() {
            const saved = localStorage.getItem('focusArenaData');
            if (saved) {
                gameData = JSON.parse(saved);
            }
        }

        // 儲存數據
        function saveData() {
            localStorage.setItem('focusArenaData', JSON.stringify(gameData));
        }

        // 更新UI
        function updateUI() {
            document.getElementById('coins').textContent = gameData.coins;
            document.getElementById('xp').textContent = gameData.xp;
            document.getElementById('level').textContent = `Lv.${gameData.level}`;
            document.getElementById('streak').textContent = gameData.streak;
            document.getElementById('pomodoroCount').textContent = gameData.pomodoroCount;
            
            updateRank();
            updateLevelProgress();
            updateMiniRings();
        }

        // 更新小圓環
        function updateMiniRings() {
            // 金幣圓環 (最大值500為滿環)
            const coinPercent = Math.min(gameData.coins / 500, 1);
            document.getElementById('coinRing').style.strokeDashoffset = 157 - (157 * coinPercent);
            
            // XP圓環 (根據當前段位進度)
            const currentRankIndex = ranks.findIndex(r => gameData.xp < r.minXP) - 1;
            const currentRank = ranks[Math.max(0, currentRankIndex)];
            const nextRank = ranks[Math.min(currentRankIndex + 1, ranks.length - 1)];
            const xpPercent = (gameData.xp - currentRank.minXP) / (nextRank.minXP - currentRank.minXP);
            document.getElementById('xpRing').style.strokeDashoffset = 157 - (157 * xpPercent);
            
            // 等級圓環
            const levelPercent = ((gameData.xp % 50) / 50);
            document.getElementById('levelRing').style.strokeDashoffset = 157 - (157 * levelPercent);
            
            // 連續天數圓環 (30天為滿環)
            const streakPercent = Math.min(gameData.streak / 30, 1);
            document.getElementById('streakRing').style.strokeDashoffset = 157 - (157 * streakPercent);
        }

        // 更新段位
        function updateRank() {
            let currentRank = ranks[0];
            for (let rank of ranks) {
                if (gameData.xp >= rank.minXP) {
                    currentRank = rank;
                } else {
                    break;
                }
            }
            document.getElementById('rankIcon').textContent = currentRank.icon;
            document.getElementById('rankName').textContent = currentRank.name;
        }

        // 更新等級進度條
        function updateLevelProgress() {
            const xpPerLevel = 50;
            const currentLevelXP = (gameData.level - 1) * xpPerLevel;
            const nextLevelXP = gameData.level * xpPerLevel;
            const progress = ((gameData.xp - currentLevelXP) / xpPerLevel) * 100;
            
            document.getElementById('levelProgress').style.width = `${Math.min(progress, 100)}%`;
            document.getElementById('levelProgressText').textContent = `${Math.floor(progress)}%`;
            
            // 檢查升級
            if (gameData.xp >= nextLevelXP) {
                gameData.level++;
                showNotification('🎉 升級了！', `恭喜達到 Lv.${gameData.level}！獲得 10 金幣獎勵！`);
                gameData.coins += 10;
                updateUI();
                saveData();
            }
        }

        // 更新番茄鐘圓環
        function updateTimerRing() {
            const percent = (totalTime - timeLeft) / totalTime;
            const offset = 691 * (1 - percent);
            document.getElementById('timerProgress').style.strokeDashoffset = offset;
            document.getElementById('timerGlow').style.strokeDashoffset = offset;
        }

        // 番茄鐘功能
        function startTimer() {
            if (!isRunning) {
                isRunning = true;
                document.getElementById('startBtn').style.display = 'none';
                document.getElementById('pauseBtn').style.display = 'inline-block';
                
                timerInterval = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();
                    updateTimerRing();
                    
                    if (timeLeft <= 0) {
                        completePomodoro();
                    }
                }, 1000);
            }
        }

        function pauseTimer() {
            isRunning = false;
            clearInterval(timerInterval);
            document.getElementById('startBtn').style.display = 'inline-block';
            document.getElementById('pauseBtn').style.display = 'none';
        }

        function resetTimer() {
            isRunning = false;
            clearInterval(timerInterval);
            timeLeft = 25 * 60;
            totalTime = 25 * 60;
            updateTimerDisplay();
            updateTimerRing();
            document.getElementById('startBtn').style.display = 'inline-block';
            document.getElementById('pauseBtn').style.display = 'none';
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timerDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function completePomodoro() {
            clearInterval(timerInterval);
            isRunning = false;
            
            gameData.coins += 10;
            gameData.xp += 25;
            gameData.pomodoroCount++;
            gameData.totalFocusTime += 25;
            
            timeLeft = 25 * 60;
            totalTime = 25 * 60;
            updateTimerDisplay();
            updateTimerRing();
            document.getElementById('startBtn').style.display = 'inline-block';
            document.getElementById('pauseBtn').style.display = 'none';
            
            showNotification('🎉 完成番茄鐘！', '獲得 10 金幣和 25 XP！');
            updateUI();
            saveData();
            playSound();
        }

        // 更新任務統計
        function updateTodoStats() {
            const total = gameData.todos.length;
            const completed = gameData.todos.filter(t => t.completed).length;
            const todayTodos = gameData.todos.filter(t => {
                const todoDate = new Date(t.createdAt).toDateString();
                return todoDate === new Date().toDateString();
            });
            
            // 完成率圓環
            const completePercent = total > 0 ? (completed / total) : 0;
            document.getElementById('todoCompleteRing').style.strokeDashoffset = 220 - (220 * completePercent);
            document.getElementById('todoCompletePercent').textContent = `${Math.round(completePercent * 100)}%`;
            
            // 今日任務圓環
            const dailyPercent = Math.min(todayTodos.length / 10, 1); // 10個任務為滿環
            document.getElementById('todoDailyRing').style.strokeDashoffset = 220 - (220 * dailyPercent);
            document.getElementById('todoDailyCount').textContent = todayTodos.length;
        }

        // 待辦事項功能
        function addTodo() {
            const input = document.getElementById('todoInput');
            const text = input.value.trim();
            
            if (text) {
                const todo = {
                    id: Date.now(),
                    text: text,
                    completed: false,
                    createdAt: new Date().toISOString()
                };
                
                gameData.todos.push(todo);
                input.value = '';
                updateTodoList();
                updateTodoStats();
                saveData();
            }
        }

        function updateTodoList() {
            const todoList = document.getElementById('todoList');
            todoList.innerHTML = '';
            
            gameData.todos.forEach(todo => {
                const item = document.createElement('div');
                item.className = `todo-item ${todo.completed ? 'completed' : ''}`;
                
                item.innerHTML = `
                    <input type="checkbox" class="todo-checkbox" 
                           ${todo.completed ? 'checked' : ''} 
                           onchange="toggleTodo(${todo.id})">
                    <span class="todo-text">${todo.text}</span>
                    <button class="todo-delete" onclick="deleteTodo(${todo.id})">刪除</button>
                `;
                
                todoList.appendChild(item);
            });
        }

        function toggleTodo(id) {
            const todo = gameData.todos.find(t => t.id === id);
            if (todo) {
                if (!todo.completed) {
                    gameData.coins += 5;
                    gameData.xp += 10;
                    gameData.completedTasks++;
                    showNotification('✅ 任務完成！', '獲得 5 金幣和 10 XP！');
                }
                todo.completed = !todo.completed;
                updateTodoList();
                updateTodoStats();
                updateUI();
                saveData();
            }
        }

        function deleteTodo(id) {
            gameData.todos = gameData.todos.filter(t => t.id !== id);
            updateTodoList();
            updateTodoStats();
            saveData();
        }

        // 兌換休息時間
        function redeemBreak(minutes, cost) {
            if (gameData.coins >= cost) {
                gameData.coins -= cost;
                updateUI();
                saveData();
                startBreakTimer(minutes);
                showNotification('🎮 兌換成功！', `享受您的 ${minutes} 分鐘休息時間！`);
            } else {
                showNotification('❌ 金幣不足', `您需要 ${cost} 金幣才能兌換！`);
            }
        }

        // 休息計時器
        function startBreakTimer(minutes) {
            let breakTime = minutes * 60;
            const breakTimer = document.getElementById('breakTimer');
            breakTimer.classList.add('active');
            
            clearInterval(breakInterval);
            breakInterval = setInterval(() => {
                breakTime--;
                const mins = Math.floor(breakTime / 60);
                const secs = breakTime % 60;
                document.getElementById('breakDisplay').textContent = 
                    `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                
                if (breakTime <= 0) {
                    stopBreak();
                    showNotification('⏰ 休息結束', '繼續加油！');
                }
            }, 1000);
        }

        function stopBreak() {
            clearInterval(breakInterval);
            document.getElementById('breakTimer').classList.remove('active');
        }

        // 檢查連續天數
        function checkStreak() {
            const today = new Date().toDateString();
            const lastActive = new Date(gameData.lastActiveDate);
            const todayDate = new Date(today);
            const dayDiff = Math.floor((todayDate - lastActive) / (1000 * 60 * 60 * 24));
            
            if (dayDiff === 1) {
                gameData.streak++;
            } else if (dayDiff > 1) {
                gameData.streak = 1;
            }
            
            gameData.lastActiveDate = today;
            saveData();
        }

        // 通知功能
        function showNotification(title, message) {
            const notification = document.getElementById('notification');
            document.getElementById('notificationTitle').textContent = title;
            document.getElementById('notificationMessage').textContent = message;
            notification.classList.add('show');
        }

        function closeNotification() {
            document.getElementById('notification').classList.remove('show');
        }

        // 音效功能
        function playSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 800;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
        }

        // 數據管理
        function exportData() {
            const dataStr = JSON.stringify(gameData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `FocusArena_${new Date().toISOString().slice(0, 10)}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification('💾 匯出成功', '數據已保存到檔案');
        }

        function importData(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const imported = JSON.parse(e.target.result);
                        if (imported.coins !== undefined && imported.xp !== undefined) {
                            gameData = imported;
                            saveData();
                            updateUI();
                            updateTodoList();
                            updateTodoStats();
                            showNotification('📂 匯入成功', '數據已恢復');
                        } else {
                            showNotification('❌ 匯入失敗', '檔案格式錯誤');
                        }
                    } catch (error) {
                        showNotification('❌ 匯入失敗', '無法讀取檔案');
                    }
                };
                reader.readAsText(file);
            }
            event.target.value = '';
        }

        function showResetConfirm() {
            document.getElementById('confirmDialog').classList.add('show');
        }

        function hideResetConfirm() {
            document.getElementById('confirmDialog').classList.remove('show');
        }

        function resetAllData() {
            gameData = {
                coins: 0,
                xp: 0,
                level: 1,
                streak: 0,
                pomodoroCount: 0,
                todos: [],
                lastActiveDate: new Date().toDateString(),
                totalFocusTime: 0,
                completedTasks: 0
            };
            timeLeft = 25 * 60;
            totalTime = 25 * 60;
            updateTimerDisplay();
            updateTimerRing();
            saveData();
            updateUI();
            updateTodoList();
            updateTodoStats();
            hideResetConfirm();
            showNotification('🔄 重置完成', '所有數據已清空');
        }

        // 初始化
        init();
    </script>
</body>
</html>