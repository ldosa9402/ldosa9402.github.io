<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FocusArena - å°ˆæ³¨åŠ›ç«¶æŠ€å ´</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --warning-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            --dark-bg: #1a1a2e;
            --card-bg: rgba(255, 255, 255, 0.98);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.15);
            --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.12);
            --shadow-md: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* å‹•æ…‹èƒŒæ™¯æ•ˆæœ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.03" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,138.7C960,139,1056,117,1152,112C1248,107,1344,117,1392,122.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') no-repeat bottom;
            pointer-events: none;
            z-index: 1;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        /* å“ç‰Œæ¨™é¡Œ */
        .brand-header {
            text-align: center;
            margin-bottom: 30px;
            animation: fadeInDown 0.8s ease;
        }

        .brand-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 48px;
            font-weight: 900;
            color: white;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            letter-spacing: 3px;
            margin-bottom: 10px;
            display: inline-flex;
            align-items: center;
            gap: 15px;
        }

        .brand-icon {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .brand-subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 16px;
            font-weight: 500;
            letter-spacing: 2px;
        }

        /* ä¸»è¦çµ±è¨ˆå¡ç‰‡ */
        .stats-header {
            background: var(--card-bg);
            border-radius: 25px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow-xl);
            backdrop-filter: blur(10px);
            animation: fadeIn 0.8s ease 0.2s both;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .rank-section {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .rank-badge {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 24px;
            background: var(--primary-gradient);
            color: white;
            border-radius: 15px;
            font-size: 18px;
            font-weight: 700;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }

        .rank-badge::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .rank-icon {
            font-size: 28px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
        }

        .data-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 10px 18px;
            border: none;
            background: white;
            color: #667eea;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }

        .action-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: var(--primary-gradient);
            transition: width 0.5s, height 0.5s;
            transform: translate(-50%, -50%);
        }

        .action-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .action-btn:hover {
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .action-btn span {
            position: relative;
            z-index: 1;
        }

        /* çµ±è¨ˆé …ç›®ç¶²æ ¼ - åŠ å…¥åœ“ç’° */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px 15px;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            cursor: default;
            position: relative;
        }

        .stat-card:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .stat-card:nth-child(1) { background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); }
        .stat-card:nth-child(2) { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); }
        .stat-card:nth-child(3) { background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%); }
        .stat-card:nth-child(4) { background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%); }

        /* å°å‹åœ“ç’°é€²åº¦ */
        .mini-ring {
            width: 60px;
            height: 60px;
            position: relative;
        }

        .mini-ring svg {
            transform: rotate(-90deg);
        }

        .mini-ring-bg {
            stroke: rgba(255, 255, 255, 0.3);
            fill: none;
            stroke-width: 6;
        }

        .mini-ring-progress {
            stroke: white;
            fill: none;
            stroke-width: 6;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.5s ease;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
        }

        .mini-ring-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .stat-info {
            text-align: center;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.8;
            font-weight: 500;
            color: #2c3e50;
        }

        .stat-value {
            font-size: 18px;
            font-weight: 700;
            color: #2c3e50;
        }

        /* ç¶“é©—å€¼é€²åº¦æ¢ */
        .xp-progress {
            background: #e0e7ff;
            border-radius: 20px;
            height: 35px;
            overflow: hidden;
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.1);
            position: relative;
        }

        .xp-bar {
            height: 100%;
            background: var(--primary-gradient);
            border-radius: 20px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 14px;
            position: relative;
            overflow: hidden;
        }

        .xp-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255,255,255,0.3), 
                transparent);
            animation: progressShine 2s linear infinite;
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* ä¸»è¦å…§å®¹ç¶²æ ¼ */
        .main-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        /* å¡ç‰‡æ¨£å¼ */
        .card {
            background: var(--card-bg);
            border-radius: 25px;
            padding: 30px;
            box-shadow: var(--shadow-xl);
            backdrop-filter: blur(10px);
            animation: fadeInUp 0.8s ease both;
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card:nth-child(1) { animation-delay: 0.3s; }
        .card:nth-child(2) { animation-delay: 0.4s; }
        .card:nth-child(3) { animation-delay: 0.5s; }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 25px;
        }

        .card-icon {
            width: 45px;
            height: 45px;
            background: var(--primary-gradient);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: var(--shadow-md);
        }

        .card-title {
            font-size: 22px;
            font-weight: 700;
            color: #2c3e50;
            flex: 1;
        }

        /* ç•ªèŒ„é˜åœ“ç’°æ¨£å¼ */
        .timer-container {
            text-align: center;
            padding: 20px;
        }

        .timer-ring-container {
            position: relative;
            width: 250px;
            height: 250px;
            margin: 0 auto 30px;
        }

        .timer-ring {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .timer-ring-bg {
            stroke: #e0e7ff;
            fill: none;
            stroke-width: 12;
        }

        .timer-ring-progress {
            stroke: url(#gradient);
            fill: none;
            stroke-width: 12;
            stroke-linecap: round;
            transition: stroke-dashoffset 1s linear;
            filter: drop-shadow(0 4px 8px rgba(102, 126, 234, 0.3));
        }

        .timer-ring-glow {
            stroke: url(#gradient);
            fill: none;
            stroke-width: 12;
            stroke-linecap: round;
            opacity: 0.3;
            filter: blur(8px);
        }

        .timer-display {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Orbitron', monospace;
            font-size: 48px;
            font-weight: 700;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .timer-label {
            position: absolute;
            top: 65%;
            left: 50%;
            transform: translate(-50%, 0);
            color: #7f8c8d;
            font-size: 14px;
            font-weight: 500;
        }

        /* æµ®å‹•åœ“ç’°èƒŒæ™¯è£é£¾ */
        .floating-rings {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .floating-ring {
            position: absolute;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 20s infinite ease-in-out;
        }

        .floating-ring:nth-child(1) {
            width: 300px;
            height: 300px;
            top: 10%;
            left: -150px;
            animation-delay: 0s;
        }

        .floating-ring:nth-child(2) {
            width: 200px;
            height: 200px;
            top: 60%;
            right: -100px;
            animation-delay: 5s;
        }

        .floating-ring:nth-child(3) {
            width: 150px;
            height: 150px;
            bottom: 10%;
            left: 10%;
            animation-delay: 10s;
        }

        @keyframes float {
            0%, 100% {
                transform: translate(0, 0) rotate(0deg);
            }
            33% {
                transform: translate(30px, -30px) rotate(120deg);
            }
            66% {
                transform: translate(-20px, 20px) rotate(240deg);
            }
        }

        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
        }

        /* æŒ‰éˆ•æ¨£å¼ */
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            transition: width 0.5s, height 0.5s;
            transform: translate(-50%, -50%);
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            opacity: 0.8;
        }

        .btn-success {
            background: var(--success-gradient);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
        }

        /* ä»»å‹™å®Œæˆåº¦åœ“ç’° */
        .todo-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
        }

        .todo-stat-ring {
            text-align: center;
        }

        .todo-ring {
            width: 80px;
            height: 80px;
            position: relative;
            margin: 0 auto 10px;
        }

        .todo-ring svg {
            transform: rotate(-90deg);
        }

        .todo-ring-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
        }

        .todo-stat-label {
            font-size: 12px;
            color: #7f8c8d;
            font-weight: 500;
        }

        /* å¾…è¾¦äº‹é …æ¨£å¼ */
        .todo-input-group {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        .todo-input {
            flex: 1;
            padding: 14px 18px;
            border: 2px solid #e0e7ff;
            border-radius: 12px;
            font-size: 15px;
            transition: all 0.3s;
            background: #f8f9ff;
        }

        .todo-input:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }

        .todo-list {
            max-height: 300px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .todo-list::-webkit-scrollbar {
            width: 8px;
        }

        .todo-list::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .todo-list::-webkit-scrollbar-thumb {
            background: var(--primary-gradient);
            border-radius: 10px;
        }

        .todo-item {
            display: flex;
            align-items: center;
            padding: 16px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 12px;
            margin-bottom: 12px;
            transition: all 0.3s;
            box-shadow: var(--shadow-md);
        }

        .todo-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-lg);
        }

        .todo-item.completed {
            opacity: 0.5;
            background: linear-gradient(135deg, #e0e0e0 0%, #b0b0b0 100%);
        }

        .todo-checkbox {
            width: 22px;
            height: 22px;
            margin-right: 15px;
            cursor: pointer;
            accent-color: #667eea;
        }

        .todo-text {
            flex: 1;
            font-size: 15px;
            font-weight: 500;
            color: #2c3e50;
        }

        .todo-item.completed .todo-text {
            text-decoration: line-through;
            color: #7f8c8d;
        }

        .todo-delete {
            padding: 6px 12px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .todo-delete:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-md);
        }

        /* å•†åº—æ¨£å¼ */
        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .shop-item {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            transition: all 0.3s;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }

        .shop-item::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.5), transparent);
            transform: rotate(45deg);
            transition: all 0.5s;
            opacity: 0;
        }

        .shop-item:hover::before {
            animation: shopShine 0.5s ease;
        }

        @keyframes shopShine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .shop-item:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: var(--shadow-xl);
        }

        .shop-icon {
            font-size: 48px;
            margin-bottom: 12px;
            filter: drop-shadow(0 3px 6px rgba(0,0,0,0.1));
        }

        .shop-name {
            font-size: 16px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .shop-cost {
            font-size: 18px;
            font-weight: 700;
            color: #f39c12;
            margin-bottom: 15px;
            text-shadow: 0 2px 4px rgba(243, 156, 18, 0.2);
        }

        /* ä¼‘æ¯è¨ˆæ™‚å™¨ */
        .break-timer {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
            padding: 20px 25px;
            border-radius: 20px;
            box-shadow: var(--shadow-xl);
            display: none;
            z-index: 1000;
            animation: slideInRight 0.5s ease;
        }

        .break-timer.active {
            display: block;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .break-timer h3 {
            font-size: 18px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        #breakDisplay {
            font-family: 'Orbitron', monospace;
            font-size: 32px;
            font-weight: 700;
            margin: 10px 0;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        /* é€šçŸ¥æ¨£å¼ */
        .notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 35px;
            border-radius: 25px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
            display: none;
            z-index: 2000;
            min-width: 350px;
        }

        .notification.show {
            display: block;
            animation: bounceIn 0.5s ease;
        }

        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.3);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.05);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .notification h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 28px;
            font-weight: 700;
        }

        .notification p {
            font-size: 16px;
            margin-bottom: 25px;
            color: #5a6c7d;
        }

        /* å‹•ç•« */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ç¢ºèªå°è©±æ¡† */
        .confirm-dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 2001;
            min-width: 350px;
        }

        .confirm-dialog.show {
            display: block;
            animation: bounceIn 0.5s ease;
        }

        .confirm-dialog h4 {
            margin-bottom: 15px;
            color: #2c3e50;
            font-size: 20px;
            font-weight: 700;
        }

        .confirm-dialog p {
            color: #7f8c8d;
            font-size: 14px;
            margin-bottom: 25px;
        }

        .confirm-dialog-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .confirm-btn {
            padding: 10px 24px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .confirm-btn-yes {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
        }

        .confirm-btn-no {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .confirm-btn:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        /* éš±è—æ–‡ä»¶è¼¸å…¥ */
        #fileInput {
            display: none;
        }

        /* è¼‰å…¥å‹•ç•« */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary-gradient);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeOut 1s ease 0.5s forwards;
        }

        .loader-ring {
            width: 120px;
            height: 120px;
            position: relative;
        }

        .loader-ring svg {
            animation: rotate 2s linear infinite;
        }

        @keyframes rotate {
            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                visibility: hidden;
            }
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .brand-title {
                font-size: 32px;
            }
            
            .brand-icon {
                width: 45px;
                height: 45px;
                font-size: 24px;
            }
            
            .timer-ring-container {
                width: 200px;
                height: 200px;
            }
            
            .timer-display {
                font-size: 36px;
            }
            
            .header-top {
                flex-direction: column;
                align-items: stretch;
            }
            
            .data-actions {
                justify-content: center;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- æµ®å‹•åœ“ç’°èƒŒæ™¯ -->
    <div class="floating-rings">
        <div class="floating-ring"></div>
        <div class="floating-ring"></div>
        <div class="floating-ring"></div>
    </div>

    <!-- è¼‰å…¥å‹•ç•« -->
    <div class="loader" id="loader">
        <div style="text-align: center;">
            <div style="font-family: 'Orbitron', sans-serif; font-size: 36px; color: white; font-weight: 900; margin-top: 20px;">
                FocusArena
            </div>
            <div style="color: rgba(255,255,255,0.8); margin-top: 10px;">è¼‰å…¥ä¸­...</div>
        </div>
    </div>

    <div class="container">
        <!-- å“ç‰Œæ¨™é¡Œ -->
        <div class="brand-header">
            <div class="brand-title">
                <div class="brand-icon">âš”ï¸</div>
                FocusArena
            </div>
            <div class="brand-subtitle">å°ˆæ³¨åŠ›ç«¶æŠ€å ´ - æŒ‘æˆ°è‡ªæˆ‘ï¼Œæˆå°±å“è¶Š</div>
        </div>

        <!-- çµ±è¨ˆè³‡è¨Šå¡ç‰‡ -->
        <div class="stats-header">
            <div class="header-top">
                <div class="rank-section">
                    <div class="rank-badge">
                        <span class="rank-icon" id="rankIcon">ğŸ¥‰</span>
                        <span id="rankName">é’éŠ… III</span>
                    </div>
                </div>
                <div class="data-actions">
                    <button class="action-btn" onclick="exportData()">
                        <span>ğŸ’¾</span>
                        <span>åŒ¯å‡º</span>
                    </button>
                    <button class="action-btn" onclick="document.getElementById('fileInput').click()">
                        <span>ğŸ“‚</span>
                        <span>åŒ¯å…¥</span>
                    </button>
                    <button class="action-btn" onclick="showResetConfirm()">
                        <span>ğŸ”„</span>
                        <span>é‡ç½®</span>
                    </button>
                </div>
            </div>
            
            <input type="file" id="fileInput" accept=".json" onchange="importData(event)">
            
            <!-- åœ“ç’°çµ±è¨ˆ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="mini-ring">
                        <svg width="60" height="60">
                            <circle cx="30" cy="30" r="25" class="mini-ring-bg"/>
                            <circle cx="30" cy="30" r="25" class="mini-ring-progress" 
                                    id="coinRing"
                                    stroke-dasharray="157"
                                    stroke-dashoffset="157"/>
                        </svg>
                        <div class="mini-ring-center">ğŸ’°</div>
                    </div>
                    <div class="stat-info">
                        <div class="stat-label">é‡‘å¹£</div>
                        <div class="stat-value" id="coins">0</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="mini-ring">
                        <svg width="60" height="60">
                            <circle cx="30" cy="30" r="25" class="mini-ring-bg"/>
                            <circle cx="30" cy="30" r="25" class="mini-ring-progress"
                                    id="xpRing" 
                                    stroke-dasharray="157"
                                    stroke-dashoffset="157"/>
                        </svg>
                        <div class="mini-ring-center">â­</div>
                    </div>
                    <div class="stat-info">
                        <div class="stat-label">ç¶“é©—å€¼</div>
                        <div class="stat-value" id="xp">0</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="mini-ring">
                        <svg width="60" height="60">
                            <circle cx="30" cy="30" r="25" class="mini-ring-bg"/>
                            <circle cx="30" cy="30" r="25" class="mini-ring-progress"
                                    id="levelRing"
                                    stroke-dasharray="157"
                                    stroke-dashoffset="157"/>
                        </svg>
                        <div class="mini-ring-center">ğŸ¯</div>
                    </div>
                    <div class="stat-info">
                        <div class="stat-label">ç­‰ç´š</div>
                        <div class="stat-value" id="level">Lv.1</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="mini-ring">
                        <svg width="60" height="60">
                            <circle cx="30" cy="30" r="25" class="mini-ring-bg"/>
                            <circle cx="30" cy="30" r="25" class="mini-ring-progress"
                                    id="streakRing"
                                    stroke-dasharray="157"
                                    stroke-dashoffset="157"/>
                        </svg>
                        <div class="mini-ring-center">ğŸ”¥</div>
                    </div>
                    <div class="stat-info">
                        <div class="stat-label">é€£çºŒå¤©æ•¸</div>
                        <div class="stat-value" id="streak">0</div>
                    </div>
                </div>
            </div>
            
            <div class="xp-progress">
                <div class="xp-bar" id="levelProgress">
                    <span id="levelProgressText">0%</span>
                </div>
            </div>
        </div>

        <!-- ä¸»è¦åŠŸèƒ½å€ -->
        <div class="main-grid">
            <!-- ç•ªèŒ„é˜å¡ç‰‡ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">ğŸ…</div>
                    <h2 class="card-title">ç•ªèŒ„é˜è¨ˆæ™‚å™¨</h2>
                </div>
                <div class="timer-container">
                    <div class="timer-ring-container">
                        <svg class="timer-ring" viewBox="0 0 250 250">
                            <defs>
                                <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <circle cx="125" cy="125" r="110" class="timer-ring-bg"/>
                            <circle cx="125" cy="125" r="110" class="timer-ring-glow"
                                    id="timerGlow"
                                    stroke-dasharray="691"
                                    stroke-dashoffset="0"/>
                            <circle cx="125" cy="125" r="110" class="timer-ring-progress"
                                    id="timerProgress"
                                    stroke-dasharray="691"
                                    stroke-dashoffset="0"/>
                        </svg>
                        <div class="timer-display" id="timerDisplay">25:00</div>
                        <div class="timer-label">å°ˆæ³¨æ™‚é–“</div>
                    </div>
                    <div class="timer-controls">
                        <button class="btn btn-primary" id="startBtn" onclick="startTimer()">é–‹å§‹</button>
                        <button class="btn btn-secondary" id="pauseBtn" onclick="pauseTimer()" style="display:none;">æš«åœ</button>
                        <button class="btn btn-danger" onclick="resetTimer()">é‡ç½®</button>
                    </div>
                    <div style="margin-top: 20px;">
                        <p style="color: #7f8c8d; font-size: 14px;">
                            å®Œæˆçå‹µï¼š<strong style="color: #f39c12;">10 é‡‘å¹£ + 25 XP</strong>
                        </p>
                        <p style="color: #7f8c8d; margin-top: 8px; font-size: 14px;">
                            å·²å®Œæˆ <strong id="pomodoroCount" style="color: #667eea; font-size: 18px;">0</strong> å€‹ç•ªèŒ„é˜
                        </p>
                    </div>
                </div>
            </div>

            <!-- å¾…è¾¦äº‹é …å¡ç‰‡ -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">ğŸ“‹</div>
                    <h2 class="card-title">ä»»å‹™æ¸…å–®</h2>
                </div>
                
                <!-- ä»»å‹™çµ±è¨ˆåœ“ç’° -->
                <div class="todo-stats">
                    <div class="todo-stat-ring">
                        <div class="todo-ring">
                            <svg width="80" height="80">
                                <circle cx="40" cy="40" r="35" stroke="#e0e7ff" stroke-width="8" fill="none"/>
                                <circle cx="40" cy="40" r="35" stroke="#667eea" stroke-width="8" fill="none"
                                        id="todoCompleteRing"
                                        stroke-dasharray="220"
                                        stroke-dashoffset="220"
                                        stroke-linecap="round"/>
                            </svg>
                            <div class="todo-ring-center" id="todoCompletePercent">0%</div>
                        </div>
                        <div class="todo-stat-label">å®Œæˆç‡</div>
                    </div>
                    <div class="todo-stat-ring">
                        <div class="todo-ring">
                            <svg width="80" height="80">
                                <circle cx="40" cy="40" r="35" stroke="#e0e7ff" stroke-width="8" fill="none"/>
                                <circle cx="40" cy="40" r="35" stroke="#f39c12" stroke-width="8" fill="none"
                                        id="todoDailyRing"
                                        stroke-dasharray="220"
                                        stroke-dashoffset="220"
                                        stroke-linecap="round"/>
                            </svg>
                            <div class="todo-ring-center" id="todoDailyCount">0</div>
                        </div>
                        <div class="todo-stat-label">ä»Šæ—¥ä»»å‹™</div>
                    </div>
                </div>
                
                <div class="todo-input-group">
                    <input type="text" class="todo-input" id="todoInput" placeholder="æ–°å¢ä»»å‹™..." onkeypress="if(event.key==='Enter') addTodo()">
                    <button class="btn btn-primary" onclick="addTodo()">æ–°å¢</button>
                </div>
                <div class="todo-list" id="todoList"></div>
                <div style="text-align: center; margin-top: 20px;">
                    <p style="color: #7f8c8d; font-size: 14px;">
                        å®Œæˆçå‹µï¼š<strong style="color: #f39c12;">5 é‡‘å¹£ + 10 XP</strong>
                    </p>
                </div>
            </div>
        </div>

        <!-- çå‹µå•†åº—å¡ç‰‡ -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon">ğŸª</div>
                <h2 class="card-title">çå‹µå•†åº—</h2>
            </div>
            <div class="shop-grid">
                <div class="shop-item">
                    <div class="shop-icon">â˜•</div>
                    <div class="shop-name">çŸ­æš«ä¼‘æ¯</div>
                    <div class="shop-cost">ğŸ’° 15</div>
                    <button class="btn btn-success" onclick="redeemBreak(5, 15)">5åˆ†é˜</button>
                </div>
                <div class="shop-item">
                    <div class="shop-icon">ğŸ®</div>
                    <div class="shop-name">éŠæˆ²æ™‚é–“</div>
                    <div class="shop-cost">ğŸ’° 25</div>
                    <button class="btn btn-success" onclick="redeemBreak(10, 25)">10åˆ†é˜</button>
                </div>
                <div class="shop-item">
                    <div class="shop-icon">ğŸ¿</div>
                    <div class="shop-name">å½±ç‰‡æ™‚é–“</div>
                    <div class="shop-cost">ğŸ’° 35</div>
                    <button class="btn btn-success" onclick="redeemBreak(15, 35)">15åˆ†é˜</button>
                </div>
                <div class="shop-item">
                    <div class="shop-icon">ğŸ›‹ï¸</div>
                    <div class="shop-name">å®Œæ•´ä¼‘æ¯</div>
                    <div class="shop-cost">ğŸ’° 60</div>
                    <button class="btn btn-success" onclick="redeemBreak(30, 60)">30åˆ†é˜</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ä¼‘æ¯è¨ˆæ™‚å™¨ -->
    <div class="break-timer" id="breakTimer">
        <h3>ğŸ® ä¼‘æ¯æ™‚é–“</h3>
        <div id="breakDisplay">00:00</div>
        <button class="btn btn-danger" style="margin-top: 15px; width: 100%;" onclick="stopBreak()">çµæŸ</button>
    </div>

    <!-- é€šçŸ¥å½ˆçª— -->
    <div class="notification" id="notification">
        <h3 id="notificationTitle">æ­å–œï¼</h3>
        <p id="notificationMessage">æ‚¨å®Œæˆäº†ä¸€å€‹ç•ªèŒ„é˜ï¼</p>
        <button class="btn btn-primary" onclick="closeNotification()">ç¢ºå®š</button>
    </div>

    <!-- ç¢ºèªå°è©±æ¡† -->
    <div class="confirm-dialog" id="confirmDialog">
        <h4>âš ï¸ ç¢ºå®šè¦é‡ç½®å—ï¼Ÿ</h4>
        <p>æ‰€æœ‰æ•¸æ“šå°‡æœƒè¢«æ¸…é™¤ï¼Œé€™å€‹æ“ä½œç„¡æ³•å¾©åŸã€‚</p>
        <div class="confirm-dialog-buttons">
            <button class="confirm-btn confirm-btn-no" onclick="hideResetConfirm()">å–æ¶ˆ</button>
            <button class="confirm-btn confirm-btn-yes" onclick="resetAllData()">ç¢ºå®š</button>
        </div>
    </div>

    <script>
        // éš±è—è¼‰å…¥ç•«é¢
        setTimeout(() => {
            document.getElementById('loader').style.display = 'none';
        }, 1500);

        // éŠæˆ²æ•¸æ“š
        let gameData = {
            coins: 0,
            xp: 0,
            level: 1,
            streak: 0,
            pomodoroCount: 0,
            todos: [],
            lastActiveDate: new Date().toDateString(),
            totalFocusTime: 0,
            completedTasks: 0
        };

        // æ®µä½ç³»çµ±
        const ranks = [
            { name: "é’éŠ… III", icon: "ğŸ¥‰", minXP: 0 },
            { name: "é’éŠ… II", icon: "ğŸ¥‰", minXP: 100 },
            { name: "é’éŠ… I", icon: "ğŸ¥‰", minXP: 200 },
            { name: "ç™½éŠ€ III", icon: "ğŸ¥ˆ", minXP: 400 },
            { name: "ç™½éŠ€ II", icon: "ğŸ¥ˆ", minXP: 600 },
            { name: "ç™½éŠ€ I", icon: "ğŸ¥ˆ", minXP: 900 },
            { name: "é»ƒé‡‘ III", icon: "ğŸ¥‡", minXP: 1300 },
            { name: "é»ƒé‡‘ II", icon: "ğŸ¥‡", minXP: 1700 },
            { name: "é»ƒé‡‘ I", icon: "ğŸ¥‡", minXP: 2200 },
            { name: "ç™½é‡‘ III", icon: "ğŸ’ ", minXP: 2800 },
            { name: "ç™½é‡‘ II", icon: "ğŸ’ ", minXP: 3500 },
            { name: "ç™½é‡‘ I", icon: "ğŸ’ ", minXP: 4300 },
            { name: "é‘½çŸ³ III", icon: "ğŸ’", minXP: 5200 },
            { name: "é‘½çŸ³ II", icon: "ğŸ’", minXP: 6200 },
            { name: "é‘½çŸ³ I", icon: "ğŸ’", minXP: 7300 },
            { name: "å¤§å¸«", icon: "ğŸ‘‘", minXP: 8500 },
            { name: "å®—å¸«", icon: "ğŸ†", minXP: 10000 },
            { name: "å‚³èªª", icon: "ğŸŒŸ", minXP: 12000 },
            { name: "å‚³èªªä¸€æ˜Ÿ", icon: "ğŸŒŸ", minXP: 12200 },
            { name: "å‚³èªªäºŒæ˜Ÿ", icon: "ğŸŒŸ", minXP: 12400 },
            { name: "å‚³èªªä¸‰æ˜Ÿ", icon: "ğŸŒŸ", minXP: 12600 },
            { name: "å‚³èªªå››æ˜Ÿ", icon: "ğŸŒŸ", minXP: 12800 }
        ];

        // è¨ˆæ™‚å™¨è®Šæ•¸
        let timerInterval = null;
        let breakInterval = null;
        let timeLeft = 25 * 60;
        let totalTime = 25 * 60;
        let isRunning = false;

        // åˆå§‹åŒ–
        function init() {
            loadData();
            updateUI();
            updateTodoList();
            updateTodoStats();
            checkStreak();
            updateTimerRing();
        }

        // è¼‰å…¥æ•¸æ“š
        function loadData() {
            const saved = localStorage.getItem('focusArenaData');
            if (saved) {
                gameData = JSON.parse(saved);
            }
        }

        // å„²å­˜æ•¸æ“š
        function saveData() {
            localStorage.setItem('focusArenaData', JSON.stringify(gameData));
        }

        // æ›´æ–°UI
        function updateUI() {
            document.getElementById('coins').textContent = gameData.coins;
            document.getElementById('xp').textContent = gameData.xp;
            document.getElementById('level').textContent = `Lv.${gameData.level}`;
            document.getElementById('streak').textContent = gameData.streak;
            document.getElementById('pomodoroCount').textContent = gameData.pomodoroCount;
            
            updateRank();
            updateLevelProgress();
            updateMiniRings();
        }

        // æ›´æ–°å°åœ“ç’°
        function updateMiniRings() {
            // é‡‘å¹£åœ“ç’° (æœ€å¤§å€¼500ç‚ºæ»¿ç’°)
            const coinPercent = Math.min(gameData.coins / 500, 1);
            document.getElementById('coinRing').style.strokeDashoffset = 157 - (157 * coinPercent);
            
            // XPåœ“ç’° (æ ¹æ“šç•¶å‰æ®µä½é€²åº¦)
            const currentRankIndex = ranks.findIndex(r => gameData.xp < r.minXP) - 1;
            const currentRank = ranks[Math.max(0, currentRankIndex)];
            const nextRank = ranks[Math.min(currentRankIndex + 1, ranks.length - 1)];
            const xpPercent = (gameData.xp - currentRank.minXP) / (nextRank.minXP - currentRank.minXP);
            document.getElementById('xpRing').style.strokeDashoffset = 157 - (157 * xpPercent);
            
            // ç­‰ç´šåœ“ç’°
            const levelPercent = ((gameData.xp % 50) / 50);
            document.getElementById('levelRing').style.strokeDashoffset = 157 - (157 * levelPercent);
            
            // é€£çºŒå¤©æ•¸åœ“ç’° (30å¤©ç‚ºæ»¿ç’°)
            const streakPercent = Math.min(gameData.streak / 30, 1);
            document.getElementById('streakRing').style.strokeDashoffset = 157 - (157 * streakPercent);
        }

        // æ›´æ–°æ®µä½
        function updateRank() {
            let currentRank = ranks[0];
            for (let rank of ranks) {
                if (gameData.xp >= rank.minXP) {
                    currentRank = rank;
                } else {
                    break;
                }
            }
            document.getElementById('rankIcon').textContent = currentRank.icon;
            document.getElementById('rankName').textContent = currentRank.name;
        }

        // æ›´æ–°ç­‰ç´šé€²åº¦æ¢
        function updateLevelProgress() {
            const xpPerLevel = 50;
            const currentLevelXP = (gameData.level - 1) * xpPerLevel;
            const nextLevelXP = gameData.level * xpPerLevel;
            const progress = ((gameData.xp - currentLevelXP) / xpPerLevel) * 100;
            
            document.getElementById('levelProgress').style.width = `${Math.min(progress, 100)}%`;
            document.getElementById('levelProgressText').textContent = `${Math.floor(progress)}%`;
            
            // æª¢æŸ¥å‡ç´š
            if (gameData.xp >= nextLevelXP) {
                gameData.level++;
                showNotification('ğŸ‰ å‡ç´šäº†ï¼', `æ­å–œé”åˆ° Lv.${gameData.level}ï¼ç²å¾— 10 é‡‘å¹£çå‹µï¼`);
                gameData.coins += 10;
                updateUI();
                saveData();
            }
        }

        // æ›´æ–°ç•ªèŒ„é˜åœ“ç’°
        function updateTimerRing() {
            const percent = (totalTime - timeLeft) / totalTime;
            const offset = 691 * (1 - percent);
            document.getElementById('timerProgress').style.strokeDashoffset = offset;
            document.getElementById('timerGlow').style.strokeDashoffset = offset;
        }

        // ç•ªèŒ„é˜åŠŸèƒ½
        function startTimer() {
            if (!isRunning) {
                isRunning = true;
                document.getElementById('startBtn').style.display = 'none';
                document.getElementById('pauseBtn').style.display = 'inline-block';
                
                timerInterval = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();
                    updateTimerRing();
                    
                    if (timeLeft <= 0) {
                        completePomodoro();
                    }
                }, 1000);
            }
        }

        function pauseTimer() {
            isRunning = false;
            clearInterval(timerInterval);
            document.getElementById('startBtn').style.display = 'inline-block';
            document.getElementById('pauseBtn').style.display = 'none';
        }

        function resetTimer() {
            isRunning = false;
            clearInterval(timerInterval);
            timeLeft = 25 * 60;
            totalTime = 25 * 60;
            updateTimerDisplay();
            updateTimerRing();
            document.getElementById('startBtn').style.display = 'inline-block';
            document.getElementById('pauseBtn').style.display = 'none';
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timerDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function completePomodoro() {
            clearInterval(timerInterval);
            isRunning = false;
            
            gameData.coins += 10;
            gameData.xp += 25;
            gameData.pomodoroCount++;
            gameData.totalFocusTime += 25;
            
            timeLeft = 25 * 60;
            totalTime = 25 * 60;
            updateTimerDisplay();
            updateTimerRing();
            document.getElementById('startBtn').style.display = 'inline-block';
            document.getElementById('pauseBtn').style.display = 'none';
            
            showNotification('ğŸ‰ å®Œæˆç•ªèŒ„é˜ï¼', 'ç²å¾— 10 é‡‘å¹£å’Œ 25 XPï¼');
            updateUI();
            saveData();
            playSound();
        }

        // æ›´æ–°ä»»å‹™çµ±è¨ˆ
        function updateTodoStats() {
            const total = gameData.todos.length;
            const completed = gameData.todos.filter(t => t.completed).length;
            const todayTodos = gameData.todos.filter(t => {
                const todoDate = new Date(t.createdAt).toDateString();
                return todoDate === new Date().toDateString();
            });
            
            // å®Œæˆç‡åœ“ç’°
            const completePercent = total > 0 ? (completed / total) : 0;
            document.getElementById('todoCompleteRing').style.strokeDashoffset = 220 - (220 * completePercent);
            document.getElementById('todoCompletePercent').textContent = `${Math.round(completePercent * 100)}%`;
            
            // ä»Šæ—¥ä»»å‹™åœ“ç’°
            const dailyPercent = Math.min(todayTodos.length / 10, 1); // 10å€‹ä»»å‹™ç‚ºæ»¿ç’°
            document.getElementById('todoDailyRing').style.strokeDashoffset = 220 - (220 * dailyPercent);
            document.getElementById('todoDailyCount').textContent = todayTodos.length;
        }

        // å¾…è¾¦äº‹é …åŠŸèƒ½
        function addTodo() {
            const input = document.getElementById('todoInput');
            const text = input.value.trim();
            
            if (text) {
                const todo = {
                    id: Date.now(),
                    text: text,
                    completed: false,
                    createdAt: new Date().toISOString()
                };
                
                gameData.todos.push(todo);
                input.value = '';
                updateTodoList();
                updateTodoStats();
                saveData();
            }
        }

        function updateTodoList() {
            const todoList = document.getElementById('todoList');
            todoList.innerHTML = '';
            
            gameData.todos.forEach(todo => {
                const item = document.createElement('div');
                item.className = `todo-item ${todo.completed ? 'completed' : ''}`;
                
                item.innerHTML = `
                    <input type="checkbox" class="todo-checkbox" 
                           ${todo.completed ? 'checked' : ''} 
                           onchange="toggleTodo(${todo.id})">
                    <span class="todo-text">${todo.text}</span>
                    <button class="todo-delete" onclick="deleteTodo(${todo.id})">åˆªé™¤</button>
                `;
                
                todoList.appendChild(item);
            });
        }

        function toggleTodo(id) {
            const todo = gameData.todos.find(t => t.id === id);
            if (todo) {
                if (!todo.completed) {
                    gameData.coins += 5;
                    gameData.xp += 10;
                    gameData.completedTasks++;
                    showNotification('âœ… ä»»å‹™å®Œæˆï¼', 'ç²å¾— 5 é‡‘å¹£å’Œ 10 XPï¼');
                }
                todo.completed = !todo.completed;
                updateTodoList();
                updateTodoStats();
                updateUI();
                saveData();
            }
        }

        function deleteTodo(id) {
            gameData.todos = gameData.todos.filter(t => t.id !== id);
            updateTodoList();
            updateTodoStats();
            saveData();
        }

        // å…Œæ›ä¼‘æ¯æ™‚é–“
        function redeemBreak(minutes, cost) {
            if (gameData.coins >= cost) {
                gameData.coins -= cost;
                updateUI();
                saveData();
                startBreakTimer(minutes);
                showNotification('ğŸ® å…Œæ›æˆåŠŸï¼', `äº«å—æ‚¨çš„ ${minutes} åˆ†é˜ä¼‘æ¯æ™‚é–“ï¼`);
            } else {
                showNotification('âŒ é‡‘å¹£ä¸è¶³', `æ‚¨éœ€è¦ ${cost} é‡‘å¹£æ‰èƒ½å…Œæ›ï¼`);
            }
        }

        // ä¼‘æ¯è¨ˆæ™‚å™¨
        function startBreakTimer(minutes) {
            let breakTime = minutes * 60;
            const breakTimer = document.getElementById('breakTimer');
            breakTimer.classList.add('active');
            
            clearInterval(breakInterval);
            breakInterval = setInterval(() => {
                breakTime--;
                const mins = Math.floor(breakTime / 60);
                const secs = breakTime % 60;
                document.getElementById('breakDisplay').textContent = 
                    `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                
                if (breakTime <= 0) {
                    stopBreak();
                    showNotification('â° ä¼‘æ¯çµæŸ', 'ç¹¼çºŒåŠ æ²¹ï¼');
                }
            }, 1000);
        }

        function stopBreak() {
            clearInterval(breakInterval);
            document.getElementById('breakTimer').classList.remove('active');
        }

        // æª¢æŸ¥é€£çºŒå¤©æ•¸
        function checkStreak() {
            const today = new Date().toDateString();
            const lastActive = new Date(gameData.lastActiveDate);
            const todayDate = new Date(today);
            const dayDiff = Math.floor((todayDate - lastActive) / (1000 * 60 * 60 * 24));
            
            if (dayDiff === 1) {
                gameData.streak++;
            } else if (dayDiff > 1) {
                gameData.streak = 1;
            }
            
            gameData.lastActiveDate = today;
            saveData();
        }

        // é€šçŸ¥åŠŸèƒ½
        function showNotification(title, message) {
            const notification = document.getElementById('notification');
            document.getElementById('notificationTitle').textContent = title;
            document.getElementById('notificationMessage').textContent = message;
            notification.classList.add('show');
        }

        function closeNotification() {
            document.getElementById('notification').classList.remove('show');
        }

        // éŸ³æ•ˆåŠŸèƒ½
        function playSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 800;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
        }

        // æ•¸æ“šç®¡ç†
        function exportData() {
            const dataStr = JSON.stringify(gameData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `FocusArena_${new Date().toISOString().slice(0, 10)}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification('ğŸ’¾ åŒ¯å‡ºæˆåŠŸ', 'æ•¸æ“šå·²ä¿å­˜åˆ°æª”æ¡ˆ');
        }

        function importData(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const imported = JSON.parse(e.target.result);
                        if (imported.coins !== undefined && imported.xp !== undefined) {
                            gameData = imported;
                            saveData();
                            updateUI();
                            updateTodoList();
                            updateTodoStats();
                            showNotification('ğŸ“‚ åŒ¯å…¥æˆåŠŸ', 'æ•¸æ“šå·²æ¢å¾©');
                        } else {
                            showNotification('âŒ åŒ¯å…¥å¤±æ•—', 'æª”æ¡ˆæ ¼å¼éŒ¯èª¤');
                        }
                    } catch (error) {
                        showNotification('âŒ åŒ¯å…¥å¤±æ•—', 'ç„¡æ³•è®€å–æª”æ¡ˆ');
                    }
                };
                reader.readAsText(file);
            }
            event.target.value = '';
        }

        function showResetConfirm() {
            document.getElementById('confirmDialog').classList.add('show');
        }

        function hideResetConfirm() {
            document.getElementById('confirmDialog').classList.remove('show');
        }

        function resetAllData() {
            gameData = {
                coins: 0,
                xp: 0,
                level: 1,
                streak: 0,
                pomodoroCount: 0,
                todos: [],
                lastActiveDate: new Date().toDateString(),
                totalFocusTime: 0,
                completedTasks: 0
            };
            timeLeft = 25 * 60;
            totalTime = 25 * 60;
            updateTimerDisplay();
            updateTimerRing();
            saveData();
            updateUI();
            updateTodoList();
            updateTodoStats();
            hideResetConfirm();
            showNotification('ğŸ”„ é‡ç½®å®Œæˆ', 'æ‰€æœ‰æ•¸æ“šå·²æ¸…ç©º');
        }

        // åˆå§‹åŒ–
        init();
    </script>
</body>
</html>